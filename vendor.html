<h2>Vendor Dashboard</h2>
<form onsubmit="generateCode(event)">
  <input id="amount" type="number" placeholder="Amount" required />
  <button type="submit">Generate Code</button>
</form>
<div id="result"></div>

<script>
  async function generateCode(e) {
    e.preventDefault();
    const amount = document.getElementById('amount').value;

    const res = await fetch('/vendor/generate', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amount })
    });

    const data = await res.json();
    document.getElementById('result').innerText = data.code
      ? `Code: ${data.code}, Remaining Balance: ₹${data.remainingBalance}`
      : `❌ ${data.error}`;
  }
</script>
